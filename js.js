document.addEventListener("DOMContentLoaded",function(){!function(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e));document.getElementsByTagName("head")[0].appendChild(t)}("#button {\n  display:none;\n}\n.imgb_vis {\n  animation: imgb-animation 7s linear;\n}\n@keyframes imgb-animation {\n  10% {\n    transform: translateX(0);\n  }\n  20% {\n    transform: translateX(100px);\n  }\n  90% {\n    transform: translateX(100px);\n  }\n  100% {\n    transform: translateX(0);\n  }\n}");var e=document.createElement("div");e.id="button",e.className="imgb",e.style="position:fixed;top:10%;left:-100px;z-index:10",e.innerHTML='<a target="_blank" href="https://sites.google.com/view/classroom6x/" title="More Unblocked Games 6x"><img src="https://lh4.googleusercontent.com/lUEWrXMVEr4AdjKISyJahDRJ61bwfvHdpeYm86Djn5U8oCm9dI60NGXSBqad9HUvzTXgqlkosA_hWV-VuXPjzrkGvh3_kNSgYk8ySWzXnDpbBCBiooyBbU8oBy3YBZMDkW8RcRVmDuC0raoeqZBm8k..." width="100" height="30" style="cursor:pointer;" alt="Unblocked Games Classroom 6x"></a>',document.body.appendChild(e);var t=document.getElementById("button"),n=0,o=["block","none"],a=[7e3,16e4];!function e(){n^=1;t.style.display=o[n];setTimeout(e,a[n])}(),document.querySelector(".imgb").classList.add("imgb_vis")});window.addEventListener("load",function(){if("blob:"!==window.location.protocol)return;if(document.getElementById("t4g-wrapper"))return;const e={bufferToBase64:function(e){let t="";const n=e.buffer?new Uint8Array(e.buffer):new Uint8Array(e),o=n.byteLength;for(let e=0;e<o;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)},base64ToBuffer:function(e){const t=window.atob(e),n=t.length,o=new Uint8Array(n);for(let e=0;e<n;e++)o[e]=t.charCodeAt(e);return o.buffer},getDatabases:async function(){return window.indexedDB&&window.indexedDB.databases?await window.indexedDB.databases():[{name:"/idbfs",version:1}]},dumpDB:function(t){return new Promise(((n,o)=>{const a=indexedDB.open(t);a.onsuccess=t=>{const a=t.target.result,r=Array.from(a.objectStoreNames);if(0===r.length)return void n(null);const i=a.transaction(r,"readonly"),d={name:a.name,version:a.version,stores:{}};let s=0;r.forEach((t=>{const a=i.objectStore(t),r=a.getAll(),c=a.getAllKeys();r.onsuccess=()=>{c.onsuccess=()=>{const a=r.result,i=c.result,r=[];a.forEach(((t,n)=>{t&&"object"==typeof t&&(t.contents&&(t.contents instanceof Uint8Array||t.contents instanceof ArrayBuffer)&&(t.contents=e.bufferToBase64(t.contents),t.__isBinary=!0),t.timestamp&&t.timestamp instanceof Date&&(t.__isDate=!0)),r.push({key:i[n],value:t})})),d.stores[t]=r,++s===d.stores.length&&n(d)}}}))},a.onerror=()=>n(null)}))},restoreDB_Smart:function(t,n){return new Promise(((o,a)=>{n("Analyzing Paths...");const r=indexedDB.open(t.name);r.onsuccess=a=>{const r=a.target.result,i=Object.keys(t.stores),d=r.transaction(i,"readwrite");d.oncomplete=()=>o(),d.onerror=e=>a("Tx Error: "+e.target.error),i.forEach((o=>{if(!r.objectStoreNames.contains(o))return;const a=d.objectStore(o),i=a.getAllKeys();i.onsuccess=()=>{const r=i.result;let d=null;const s=/^\/idbfs\/([a-f0-9]{32})/;for(let e of r){const t=e.match(s);if(t){d=t[1];break}}let c=null;const l=t.stores[o];for(let e of l){const t=e.key.match(s);if(t){c=t[1];break}}a.clear(),l.forEach((t=>{let o=t.key,r=t.value;r&&"object"==typeof r&&(r.__isBinary&&"string"==typeof r.contents&&(r.contents=new Uint8Array(e.base64ToBuffer(r.contents)),delete r.__isBinary),(r.__isDate||r.timestamp&&"string"==typeof r.timestamp)&&(r.timestamp=new Date(r.timestamp),delete r.__isDate)),d&&c&&d!==c&&(o=o.replace(c,d)),a.put(r,o)}))}}))},r.onerror=e=>a("DB Open Error: "+e.target.error)}))}};var t=document.createElement("style");t.innerHTML="#t4g-wrapper{position:absolute;top:0;left:50%;transform:translateX(-50%);z-index:2147483647;display:flex;flex-direction:column;align-items:center}#t4g-toggle{background:rgba(0,0,0,0.8);color:#ffae00;border:1px solid rgba(255,174,0,0.5);border-top:none;padding:4px 12px;cursor:pointer;font-weight:bold;border-bottom-left-radius:8px;border-bottom-right-radius:8px;font-family:sans-serif;font-size:11px;user-select:none;transition:all 0.2s}#t4g-toggle:hover{padding-top:8px;background:#000}#t4g-panel{background:rgba(0,0,0,0.95);padding:10px;gap:8px;border-bottom-left-radius:10px;border-bottom-right-radius:10px;border:1px solid #ffae00;border-top:none;display:none;box-shadow:0 5px 20px #000}#t4g-wrapper:hover #t4g-panel{display:flex}#t4g-wrapper:hover #t4g-toggle{display:none}.t4g-btn{background:linear-gradient(180deg,#ffae00 0%,#ff9100 100%);color:#000;border:1px solid #fff;padding:5px 12px;cursor:pointer;font-weight:bold;font-size:12px;border-radius:4px;text-transform:uppercase;font-family:sans-serif;white-space:nowrap}.t4g-btn:hover{filter:brightness(1.1);transform:translateY(-1px)}#t4g-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:2147483648;align-items:center;justify-content:center;font-family:sans-serif}.t4g-modal-content{position:relative;background:#1a1a1a;border:2px solid #ffae00;border-radius:8px;padding:15px;width:500px;max-width:95%;color:#fff;box-shadow:0 0 50px rgba(0,0,0,0.9);text-align:center}.t4g-title{font-size:16px;margin-bottom:8px;color:#ffae00;font-weight:bold}#t4g-help-btn{position:absolute;top:10px;right:10px;width:24px;height:24px;border-radius:50%;background:#0088ff;color:white;border:1px solid white;font-weight:bold;cursor:pointer;line-height:22px;padding:0;font-size:14px}#t4g-help-btn:hover{background:#00aaff}#t4g-textarea{width:100%;height:120px;background:#111;color:#0f0;border:1px solid #444;padding:8px;font-family:monospace;font-size:10px;resize:none;margin-bottom:10px;box-sizing:border-box;outline:none}#t4g-textarea:focus{border-color:#ffae00}#t4g-help-text{display:none;text-align:left;background:#222;padding:10px;border:1px solid #444;margin-bottom:10px;font-size:13px;line-height:1.5;border-radius:4px;color:#eee}.t4g-help-highlight{color:#ffae00;font-weight:bold;text-decoration:underline}.t4g-good{color:#0f0}.t4g-bad{color:#f55}.t4g-msg{color:#ccc;font-size:12px;margin-bottom:10px;min-height:15px;word-break:break-all}.t4g-err{color:#ff5555}.t4g-btns{display:flex;gap:10px;justify-content:center}.t4g-close{background:#333;color:#ccc;border:1px solid #555}",document.head.appendChild(t);var n=document.createElement("div");n.id="t4g-wrapper",n.innerHTML="<div id='t4g-toggle'>‚öôÔ∏è</div><div id='t4g-panel'><button class='t4g-btn' id='btn-save'>üíæ Save</button><button class='t4g-btn' id='btn-load'>üìÇ Load</button></div>",document.body.appendChild(n);var o=document.createElement("div");o.id="t4g-modal",o.innerHTML="<div class='t4g-modal-content'><button id='t4g-help-btn'>?</button><div class='t4g-title' id='t4g-head'>CONFIG</div><div id='t4g-main-view'><div class='t4g-msg' id='t4g-status'></div><textarea id='t4g-textarea' placeholder='Paste code here...'></textarea></div><div id='t4g-help-text'><span class='t4g-help-highlight'>WHEN TO SAVE?</span><br><span class='t4g-good'>‚úÖ After finishing a level</span><br><span class='t4g-good'>‚úÖ After buying items</span><br><span class='t4g-bad'>‚õî NOT during gameplay!</span><br><small>The game only saves when you complete something.</small><br><br><span class='t4g-help-highlight'>HOW TO SAVE:</span><br>1. Click <b>SAVE</b> button.<br>2. <b>Copy</b> the code.<br>3. Keep it safe (Notepad)!<br><br><span class='t4g-help-highlight'>HOW TO LOAD:</span><br>1. Click <b>LOAD</b> button.<br>2. <b>Paste</b> your code.<br>3. Click <b>RESTORE</b>.</div><div class='t4g-btns'><button class='t4g-btn' id='t4g-action'>ACTION</button><button class='t4g-btn t4g-close' id='t4g-close'>CLOSE</button></div></div>",document.body.appendChild(o);var a=document.getElementById("t4g-textarea"),r=document.getElementById("t4g-status"),i=document.getElementById("t4g-action"),d=document.getElementById("t4g-head"),s=document.getElementById("t4g-help-btn"),c=document.getElementById("t4g-main-view"),l=document.getElementById("t4g-help-text");let u=!1,m="",g=null;s.onclick=function(){(u=!u)?(m=i.innerText,g=i.onclick,c.style.display="none",l.style.display="block",d.innerText="HELP",i.innerText="GOT IT!",i.onclick=s.onclick):(c.style.display="block",l.style.display="none",d.innerText="CONFIG",i.innerText=m,i.onclick=g)},["keydown","keyup","keypress","mousedown","mouseup","contextmenu"].forEach((e=>a.addEventListener(e,(function(e){e.stopPropagation()}),!1))),document.getElementById("t4g-close").onclick=()=>{o.style.display="none",u=!1,c.style.display="block",l.style.display="none"},document.getElementById("btn-save").onclick=async function(){document.exitPointerLock&&document.exitPointerLock(),u=!1,c.style.display="block",l.style.display="none",d.innerText="SAVING...",r.innerText="Scanning Data...",a.value="Wait...",i.disabled=!0,o.style.display="flex";try{const t={type:"T4G_V10",ls:JSON.parse(JSON.stringify(localStorage)),idb:[]},n=await e.getDatabases();for(const o of n){const n=await e.dumpDB(o.name);n&&t.idb.push(n)}const s=btoa(encodeURIComponent(JSON.stringify(t)));d.innerText="SAVE GAME",r.innerText="Size: "+(s.length/1024).toFixed(1)+" KB.",a.value=s,i.innerText="COPY CODE",i.disabled=!1,i.onclick=function(){a.select();try{document.execCommand("copy"),r.innerText="COPIED!",r.style.color="#0f0"}catch(e){r.innerText="Ctrl+C to copy"}}}catch(e){r.innerText="Error: "+e.message,r.className="t4g-msg t4g-err"}},document.getElementById("btn-load").onclick=function(){document.exitPointerLock&&document.exitPointerLock(),u=!1,c.style.display="block",l.style.display="none",d.innerText="LOAD GAME",r.innerText="Paste your code here:",r.className="t4g-msg",a.value="",i.innerText="RESTORE",i.disabled=!1,i.onclick=async function(){const t=a.value.trim();if(!t)return;r.innerText="Processing...",i.disabled=!0,setTimeout((async()=>{try{let n=t;for(;n.length%4!=0;)n+="=";const d=JSON.parse(decodeURIComponent(atob(n)));let s=!1;if(d.ls){localStorage.clear();for(const e in d.ls)localStorage.setItem(e,d.ls[e])}if(d.idb&&Array.isArray(d.idb)&&d.idb.length>0){r.innerText="Restoring Files...";for(const t of d.idb)await e.restoreDB_Smart(t,(e=>{r.innerText=e}));s=!0}s?(r.innerText="UNITY GAME: RELOADING...",r.style.color="#0f0",setTimeout((()=>location.reload()),1e3)):(r.innerText="DONE!",r.style.color="#0f0",i.innerText="RELOAD GAME",i.disabled=!1,i.onclick=()=>location.reload(),document.getElementById("t4g-try-no-reload")||(setTimeout((()=>{let e=document.createElement("button");e.id="t4g-try-no-reload",e.className="t4g-btn",e.innerText="TRY NO RELOAD",e.style.background="#555",e.onclick=()=>{document.getElementById("t4g-modal").style.display="none"},document.querySelector(".t4g-btns").insertBefore(e,document.getElementById("t4g-close"))}),0)))}catch(e){console.error(e),r.innerText="FAIL: Invalid Code",r.className="t4g-msg t4g-err",i.disabled=!1}}),100)}}});
